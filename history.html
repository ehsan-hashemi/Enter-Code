<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ø®Ø±ÛŒØ¯Ù‡Ø§</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-6 font-sans">

  <!-- Ù…Ù†ÙˆÛŒ Ù†Ø§ÙˆØ¨Ø±ÛŒ -->
  <nav class="bg-blue-600 text-white p-4 rounded mb-6 flex justify-between items-center">
    <div class="text-xl font-bold">ÙØ±ÙˆØ´Ú¯Ø§Ù‡ Ø¯ÛŒØ¬ÛŒØªØ§Ù„</div>
    <div class="space-x-4 space-x-reverse">
      <a href="index.html" class="hover:underline">ğŸ›’ ÙØ±ÙˆØ´</a>
      <a href="products.html" class="hover:underline">ğŸ“¦ Ù…Ø­ØµÙˆÙ„Ø§Øª</a>
      <a href="customers.html" class="hover:underline">ğŸ‘¥ Ù…Ø´ØªØ±ÛŒØ§Ù†</a>
      <a href="history.html" class="hover:underline">ğŸ“œ ØªØ§Ø±ÛŒØ®Ú†Ù‡</a>
    </div>
  </nav>

  <div class="max-w-4xl mx-auto bg-white p-6 rounded-lg shadow-lg">
    <h1 class="text-3xl font-bold text-center mb-6">ğŸ“œ ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ø®Ø±ÛŒØ¯Ù‡Ø§</h1>
    <ul id="historyList" class="space-y-4"></ul>
  </div>

  <script>
    let purchases = JSON.parse(localStorage.getItem('purchases') || '[]');

    function renderHistory() {
      historyList.innerHTML = '';
      for (let i = 0; i < purchases.length; i++) {
        const p = purchases[i];
        const itemNames = p.items.map(i => i.name).join(', ');
        const li = document.createElement('li');
        li.className = "bg-gray-100 p-4 rounded shadow";
        li.innerHTML = `
          <div class="font-bold text-blue-700">ğŸ•’ ${p.date}</div>
          <div>ğŸ‘¤ ${p.name || 'Ù†Ø§Ù… Ù†Ø§Ù…Ø´Ø®Øµ'} | ğŸ“ ${p.phone || 'Ø´Ù…Ø§Ø±Ù‡ Ù†Ø§Ù…Ø´Ø®Øµ'}</div>
          <div>ğŸ§¾ Ù…Ø­ØµÙˆÙ„Ø§Øª: ${itemNames}</div>
          <div class="font-bold">ğŸ’° Ù…Ø¬Ù…ÙˆØ¹: ${p.total.toLocaleString()} Ø±ÛŒØ§Ù„</div>
        `;

        const deleteBtn = document.createElement('button');
        deleteBtn.textContent = 'ğŸ—‘ï¸ Ø­Ø°Ù Ø®Ø±ÛŒØ¯';
        deleteBtn.className = "bg-red-500 text-white px-2 py-1 rounded mt-2";
        deleteBtn.onclick = () => {
          if (confirm("Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ØŸ")) {
            purchases.sort((a, b) => b.timestamp - a.timestamp);
            localStorage.setItem('purchases', JSON.stringify(purchases));
            renderHistory();
          }
        };

        li.appendChild(deleteBtn);
        historyList.appendChild(li);
      }
    }

    renderHistory();
  </script>
</body>
</html>
