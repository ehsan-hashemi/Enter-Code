<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>Ù¾Ø±ÙˆÙØ§ÛŒÙ„ ÙØ±ÙˆØ´Ù†Ø¯Ù‡</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .footer {
      background-color: #f2f2f2;
      color: #333;
      text-align: center;
      padding: 1em 0;
      font-size: 0.9rem;
      border-top: 1px solid #ddd;
      direction: rtl;
    }
    .footer a {
      color: #0077cc;
      text-decoration: none;
      font-weight: bold;
    }
    .footer a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body class="bg-gray-100 p-6 font-sans">

  <!-- Ù†Ø§ÙˆØ¨Ø±ÛŒ -->
  <nav class="bg-blue-600 text-white p-4 rounded mb-6 flex justify-between items-center">
    <div class="text-xl font-bold">ÙØ±ÙˆØ´Ú¯Ø§Ù‡ Ø§Ø­Ø³Ø§Ù†</div>
    <div class="space-x-4 space-x-reverse">
      <a href="index.html" class="hover:underline">ğŸ›’ ÙØ±ÙˆØ´</a>
      <a href="products.html" class="hover:underline">ğŸ“¦ Ù…Ø­ØµÙˆÙ„Ø§Øª</a>
      <a href="customers.html" class="hover:underline">ğŸ‘¥ Ù…Ø´ØªØ±ÛŒØ§Ù†</a>
      <a href="history.html" class="hover:underline">ğŸ“œ ØªØ§Ø±ÛŒØ®Ú†Ù‡</a>
      <a href="profile.html" class="hover:underline font-bold">ğŸ‘¤ Ù¾Ø±ÙˆÙØ§ÛŒÙ„</a>
    </div>
  </nav>

  <div class="max-w-4xl mx-auto space-y-6">

    <!-- Ù¾Ø±ÙˆÙØ§ÛŒÙ„ ÙØ±ÙˆØ´Ù†Ø¯Ù‡ (Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø´Ø¯Ù‡) -->
    <div class="bg-white p-4 rounded-lg shadow flex items-center gap-4 border-r-4 border-blue-600">
      <img
        src="https://ehsan-hashemi.ir/icon.jpeg"
        alt="Ø¹Ú©Ø³ Ù¾Ø±ÙˆÙØ§ÛŒÙ„"
        class="w-24 h-24 rounded-full border-2 border-blue-500 object-cover"
      >
      <div class="flex-1 text-left">
        <div class="text-xl font-semibold text-gray-800">Ø³ÛŒØ¯ Ù…Ø­Ù…Ø¯ Ø§Ø­Ø³Ø§Ù† Ù‡Ø§Ø´Ù…ÛŒ</div>
        <br>
        <div class="text-sm text-gray-600">ÙØ±ÙˆØ´Ú¯Ø§Ù‡ Ø§Ø­Ø³Ø§Ù†</div>
        <div class="mt-2 flex space-x-4 rtl:space-x-reverse text-xs text-gray-500">
          <div>ğŸ“ 09143654519</div>
          <div>ğŸ†” 001et23fg</div>
        </div>
      </div>
    </div>

    <!-- Ø¢Ù…Ø§Ø± Ø±ÙˆØ²Ø§Ù†Ù‡ -->
    <div class="bg-white p-6 rounded-lg shadow-lg">
      <h2 class="text-2xl font-bold mb-4 text-center">ğŸ“ˆ Ø¢Ù…Ø§Ø± Ø±ÙˆØ²Ø§Ù†Ù‡</h2>
      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 text-center">
        <div class="bg-blue-100 p-4 rounded">
          <div class="text-lg font-semibold">Ø®Ø±ÛŒØ¯Ù‡Ø§ÛŒ Ø§Ù…Ø±ÙˆØ²</div>
          <div id="statDayOrders" class="text-2xl font-bold">Û°</div>
        </div>
        <div class="bg-yellow-100 p-4 rounded">
          <div class="text-lg font-semibold">Ù…Ø´ØªØ±ÛŒØ§Ù† Ø§Ù…Ø±ÙˆØ²</div>
          <div id="statDayCustomers" class="text-2xl font-bold">Û°</div>
        </div>
        <div class="bg-green-100 p-4 rounded">
          <div class="text-lg font-semibold">Ø¯Ø±Ø¢Ù…Ø¯ Ø§Ù…Ø±ÙˆØ² (Ø±ÛŒØ§Ù„)</div>
          <div id="statDayRevenue" class="text-2xl font-bold">Û°</div>
        </div>
        <div class="bg-purple-100 p-4 rounded">
          <div class="text-lg font-semibold">Ø³ÙˆØ¯ Ø§Ù…Ø±ÙˆØ² (Ø±ÛŒØ§Ù„)</div>
          <div id="statDayProfit" class="text-2xl font-bold">Û°</div>
        </div>
      </div>
    </div>

    <!-- Ø¢Ù…Ø§Ø± Ù…Ø§Ù‡Ø§Ù†Ù‡ -->
    <div class="bg-white p-6 rounded-lg shadow-lg">
      <h2 class="text-2xl font-bold mb-4 text-center">ğŸ“Š Ø¢Ù…Ø§Ø± Ù…Ø§Ù‡Ø§Ù†Ù‡</h2>
      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 text-center">
        <div class="bg-blue-100 p-4 rounded">
          <div class="text-lg font-semibold">Ø®Ø±ÛŒØ¯Ù‡Ø§ÛŒ Ø§ÛŒÙ† Ù…Ø§Ù‡</div>
          <div id="statMonthOrders" class="text-2xl font-bold">Û°</div>
        </div>
        <div class="bg-yellow-100 p-4 rounded">
          <div class="text-lg font-semibold">Ù…Ø´ØªØ±ÛŒØ§Ù† Ø§ÛŒÙ† Ù…Ø§Ù‡</div>
          <div id="statMonthCustomers" class="text-2xl font-bold">Û°</div>
        </div>
        <div class="bg-green-100 p-4 rounded">
          <div class="text-lg font-semibold">Ø¯Ø±Ø¢Ù…Ø¯ Ø§ÛŒÙ† Ù…Ø§Ù‡ (Ø±ÛŒØ§Ù„)</div>
          <div id="statMonthRevenue" class="text-2xl font-bold">Û°</div>
        </div>
        <div class="bg-purple-100 p-4 rounded">
          <div class="text-lg font-semibold">Ø³ÙˆØ¯ Ø§ÛŒÙ† Ù…Ø§Ù‡ (Ø±ÛŒØ§Ù„)</div>
          <div id="statMonthProfit" class="text-2xl font-bold">Û°</div>
        </div>
      </div>
    </div>

    <!-- Ø¢Ù…Ø§Ø± Ø³Ø§Ù„Ø§Ù†Ù‡ -->
    <div class="bg-white p-6 rounded-lg shadow-lg">
      <h2 class="text-2xl font-bold mb-4 text-center">ğŸ“… Ø¢Ù…Ø§Ø± Ø³Ø§Ù„Ø§Ù†Ù‡</h2>
      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 text-center">
        <div class="bg-blue-100 p-4 rounded">
          <div class="text-lg font-semibold">Ø®Ø±ÛŒØ¯Ù‡Ø§ÛŒ Ø§Ù…Ø³Ø§Ù„</div>
          <div id="statYearOrders" class="text-2xl font-bold">Û°</div>
        </div>
        <div class="bg-yellow-100 p-4 rounded">
          <div class="text-lg font-semibold">Ù…Ø´ØªØ±ÛŒØ§Ù† Ø§Ù…Ø³Ø§Ù„</div>
          <div id="statYearCustomers" class="text-2xl font-bold">Û°</div>
        </div>
        <div class="bg-green-100 p-4 rounded">
          <div class="text-lg font-semibold">Ø¯Ø±Ø¢Ù…Ø¯ Ø§Ù…Ø³Ø§Ù„ (Ø±ÛŒØ§Ù„)</div>
          <div id="statYearRevenue" class="text-2xl font-bold">Û°</div>
        </div>
        <div class="bg-purple-100 p-4 rounded">
          <div class="text-lg font-semibold">Ø³ÙˆØ¯ Ø§Ù…Ø³Ø§Ù„ (Ø±ÛŒØ§Ù„)</div>
          <div id="statYearProfit" class="text-2xl font-bold">Û°</div>
        </div>
      </div>
    </div>

    <!-- Ø¢Ù…Ø§Ø± Ú©Ù„ Ù…Ø´ØªØ±ÛŒØ§Ù† -->
    <div class="bg-white p-6 rounded-lg shadow-lg text-center">
      <div class="text-xl font-semibold">ğŸ‘¥ Ú©Ù„ Ù…Ø´ØªØ±ÛŒØ§Ù†</div>
      <div id="statTotalCustomers" class="text-3xl font-bold mt-2">Û°</div>
    </div>

  </div>

  <footer class="footer mt-6">
    <p style="direction: ltr">
      &copy; <span id="year">2025</span> Ù‡Ù…Ù‡ Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸ Ø§Ø³Øª.
      <a href="https://your-website.com" target="_blank">Ù†Ø§Ù… Ø´Ù…Ø§</a>
    </p>
  </footer>

  <script>
    // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø®Ø±ÛŒØ¯Ù‡Ø§ Ø§Ø² LocalStorage
    const purchases = JSON.parse(localStorage.getItem('purchases') || '[]');

    function computeStats() {
      const now = new Date();
      const dayStart   = new Date(now.getFullYear(), now.getMonth(), now.getDate()).getTime();
      const monthStart = new Date(now.getFullYear(), now.getMonth(), 1).getTime();
      const yearStart  = new Date(now.getFullYear(), 0, 1).getTime();

      // ÙÛŒÙ„ØªØ±Ù‡Ø§
      const dayList   = purchases.filter(p => p.timestamp >= dayStart);
      const monthList = purchases.filter(p => p.timestamp >= monthStart);
      const yearList  = purchases.filter(p => p.timestamp >= yearStart);

      // Ù…Ù†Ø·Ù‚ Ù…Ø­Ø§Ø³Ø¨Ù‡
      function stats(list) {
        const orders   = list.length;
        const customers= new Set(list.map(p => p.phone || '')).size;
        const revenue  = list.reduce((sum, p) => sum + (p.total || 0), 0);
        const profit   = list.reduce((sum, p) => {
          const base = p.items.reduce((s, it) => s + (it.price || 0) * (it.quantity || 1), 0);
          return sum + ((p.total || 0) - base);
        }, 0);
        return { orders, customers, revenue, profit };
      }

      const d = stats(dayList);
      const m = stats(monthList);
      const y = stats(yearList);
      const totalCustomers = new Set(purchases.map(p => p.phone||'')).size;

      // Ù†Ù…Ø§ÛŒØ´
      document.getElementById('statDayOrders')   .textContent = d.orders;
      document.getElementById('statDayCustomers').textContent = d.customers;
      document.getElementById('statDayRevenue')  .textContent = d.revenue.toLocaleString();
      document.getElementById('statDayProfit')   .textContent = d.profit.toLocaleString();

      document.getElementById('statMonthOrders')   .textContent = m.orders;
      document.getElementById('statMonthCustomers').textContent = m.customers;
      document.getElementById('statMonthRevenue')  .textContent = m.revenue.toLocaleString();
      document.getElementById('statMonthProfit')   .textContent = m.profit.toLocaleString();

      document.getElementById('statYearOrders')   .textContent = y.orders;
      document.getElementById('statYearCustomers').textContent = y.customers;
      document.getElementById('statYearRevenue')  .textContent = y.revenue.toLocaleString();
      document.getElementById('statYearProfit')   .textContent = y.profit.toLocaleString();

      document.getElementById('statTotalCustomers').textContent = totalCustomers;
      document.getElementById('year')           .textContent = now.getFullYear();
    }

    document.addEventListener('DOMContentLoaded', computeStats);
  </script>
</body>
</html>
